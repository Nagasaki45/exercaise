import{f as I,a as v,c as z,t as B}from"../chunks/DCvXmXlu.js";import{i as je}from"../chunks/6IICz2GY.js";import{o as xe,a as Re}from"../chunks/CisEU1wO.js";import{h as oe,f as We,aF as J,aG as $e,i as Ee,o as f,n as k,l as e,j as y,k as L,P as N,g as P,w,t as V,aH as ne}from"../chunks/CR1LdmZO.js";import{e as ie,s as T}from"../chunks/CJtA_M2M.js";import{i as S,s as Ne,a as le}from"../chunks/KBBR2veS.js";import{s as Pe,g as K}from"../chunks/Ci6wGq3W.js";import{w as Te}from"../chunks/Bp1PtkwD.js";const ue=[...` 	
\r\fÂ \v\uFEFF`];function Ae(a,d,p){var s=""+a;if(p){for(var r in p)if(p[r])s=s?s+" "+r:r;else if(s.length)for(var i=r.length,t=0;(t=s.indexOf(r,t))>=0;){var c=t+i;(t===0||ue.includes(s[t-1]))&&(c===s.length||ue.includes(s[c]))?s=(t===0?"":s.substring(0,t))+s.substring(c+1):t=c}}return s===""?null:s}function De(a,d,p,s,r,i){var t=a.__className;if(oe||t!==p||t===void 0){var c=Ae(p,s,i);(!oe||c!==a.getAttribute("class"))&&(c==null?a.removeAttribute("class"):a.className=c),a.__className=p}else if(i&&r!==i)for(var h in i){var o=!!i[h];(r==null||o!==!!r[h])&&a.classList.toggle(h,o)}return i}const Ce=()=>{const a=Pe;return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},updated:a.updated}},Ve={subscribe(a){return Ce().page.subscribe(a)}};function Q(a){return typeof a=="number"?a:typeof a=="string"?parseInt(a,10):0}function qe(a){const d=[],p=s=>{const r=s.sets||1,i=Q(s.rest);for(let t=0;t<r;t++)d.push({name:s.name,type:s.type,amount:s.type==="time"?Q(s.amount):s.amount,notes:s.notes}),i>0&&t<r-1&&d.push({name:"Rest",type:"time",amount:i,notes:`Rest after set ${t+1} of ${s.name}`})};if(a.exercises)for(const s of a.exercises)p(s);else if(a.rounds)for(let s=0;s<a.rounds.length;s++){const r=a.rounds[s],i=Q(r.rest_after_round);for(let t=0;t<r.count;t++){for(const o of r.exercises)p(o);const c=t===r.count-1,h=s===a.rounds.length-1;i>0&&(!c||!h)&&d.push({name:"Round Rest",type:"time",amount:i,notes:`Rest after round ${t+1}`})}}return d}var Fe=I('<p class="svelte-thejo2">Loading workout...</p>'),Ge=I('<h1 class="workout-complete svelte-thejo2">Workout Complete! ðŸŽ‰</h1> <button class="main-control svelte-thejo2">Go Home</button>',1),He=I('<p class="svelte-thejo2"> </p>'),Me=I('<div class="timer-display svelte-thejo2"> </div>'),Oe=I('<div class="reps-display svelte-thejo2"> </div>'),Ue=I('<h2 class="svelte-thejo2"> </h2> <h1 class="svelte-thejo2"> </h1> <!> <!> <button><!></button>',1),ze=I('<div class="container svelte-thejo2"><!></div>');function tt(a,d){We(d,!1);const p=()=>le(Ve,"$page",r),s=()=>le(Te,"$workouts",r),[r,i]=Ne(),t=k(),c=k(),h=k();let o=k([]),j=k(0),m=k(0),A,_=k(!0),x=null;async function X(){if("wakeLock"in navigator)try{x=await navigator.wakeLock.request("screen"),console.log("Screen Wake Lock activated."),x.addEventListener("release",()=>{console.log("Screen Wake Lock released automatically.")})}catch(l){console.error(`Failed to activate wake lock: ${l.name}, ${l.message}`)}else console.warn("Screen Wake Lock API not supported.")}function R(){x&&(x.release(),x=null,console.log("Screen Wake Lock released manually."))}function Y(){x!==null&&document.visibilityState==="visible"&&!e(_)&&X()}xe(()=>{const l=p().params.slug;if(!l){K("/");return}const g=decodeURIComponent(l),D=s().find(F=>F.name===g);D?(f(o,qe(D)),e(o).length>0&&e(o)[0].type==="time"&&f(m,e(o)[0].amount)):K("/"),document.addEventListener("visibilitychange",Y),window.addEventListener("pagehide",R)});function Z(){f(_,!1),X(),e(m)<=0&&e(t).type==="time"&&f(m,e(t).amount),A=setInterval(()=>{ne(m,-1),e(m)<=0&&ee()},1e3)}function ee(){clearInterval(A);const l=e(j)+1;if(l<e(o).length){f(j,l);const g=e(o)[l];g.type==="time"?(f(m,g.amount),Z()):(f(_,!0),f(m,0),R())}else ne(j),f(_,!0),f(m,0),R()}function ce(){if(e(t)){if(e(t).type==="reps"){ee();return}e(_)?Z():(f(_,!0),clearInterval(A),R())}}Re(()=>{clearInterval(A),R(),document.removeEventListener("visibilitychange",Y),window.removeEventListener("pagehide",R)}),J(()=>(e(o),e(j)),()=>{f(t,e(o)[e(j)])}),J(()=>(e(t),e(o)),()=>{f(c,e(t)===void 0&&e(o).length>0)}),J(()=>(e(m),e(t)),()=>{f(h,e(m)>0?e(m):e(t)?.type==="time"?e(t).amount:0)}),$e(),je();var q=ze(),fe=y(q);{var ve=l=>{var g=Fe();v(l,g)},pe=l=>{var g=z(),D=N(g);{var F=W=>{var E=Ge(),G=P(N(E),2);ie("click",G,()=>K("/")),v(W,E)},me=W=>{var E=z(),G=N(E);{var de=H=>{var te=Ue(),M=N(te),ge=y(M);L(M);var O=P(M,2),he=y(O,!0);L(O);var se=P(O,2);{var _e=n=>{var u=He(),b=y(u,!0);L(u),V(()=>T(b,(e(t),w(()=>e(t).notes)))),v(n,u)};S(se,n=>{e(t),w(()=>e(t).notes)&&n(_e)})}var ae=P(se,2);{var be=n=>{var u=Me(),b=y(u);L(u),V(()=>T(b,`${e(h)??""}s`)),v(n,u)},ke=n=>{var u=Oe(),b=y(u);L(u),V(()=>T(b,`${e(t),w(()=>e(t).amount)??""} reps`)),v(n,u)};S(ae,n=>{e(t),w(()=>e(t).type==="time")?n(be):n(ke,!1)})}var C=P(ae,2);let re;var ye=y(C);{var Le=n=>{var u=B("Next");v(n,u)},we=n=>{var u=z(),b=N(u);{var Se=$=>{var U=B("Start");v($,U)},Ie=$=>{var U=B("Pause");v($,U)};S(b,$=>{e(_)?$(Se):$(Ie,!1)},!0)}v(n,u)};S(ye,n=>{e(t),w(()=>e(t).type==="reps")?n(Le):n(we,!1)})}L(C),V(()=>{T(ge,`Step ${e(j)+1} of ${e(o),w(()=>e(o).length)??""}`),T(he,(e(t),w(()=>e(t).name))),re=De(C,1,"main-control svelte-thejo2",null,re,{pause:e(t).type==="time"&&!e(_)})}),ie("click",C,ce),v(H,te)};S(G,H=>{e(t)&&H(de)},!0)}v(W,E)};S(D,W=>{e(c)?W(F):W(me,!1)},!0)}v(l,g)};S(fe,l=>{!e(t)&&!e(c)?l(ve):l(pe,!1)})}L(q),v(a,q),Ee(),i()}export{tt as component};
